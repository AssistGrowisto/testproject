<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex,nofollow,noarchive,nosnippet">
<meta name="googlebot" content="noindex,nofollow">
<title>CRO Pre-Audit Tool | Growisto</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pptxgenjs/3.12.0/pptxgenjs.bundle.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0D0D2B;--card:#1A1A3E;--card2:#252550;--orange:#FF6B35;--blue:#007BFF;--white:#FFFFFF;--light:#CCCCCC;--muted:#999999;--green:#00C853;--red:#FF4444;--yellow:#FFBB00;--radius:12px}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--white);min-height:100vh;overflow-x:hidden}
.app{max-width:1200px;margin:0 auto;padding:24px}
.header{display:flex;align-items:center;justify-content:space-between;padding:16px 0;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:32px}
.header h1{font-size:22px;font-weight:700;color:var(--orange)}
.header span{font-size:13px;color:var(--muted)}
.steps{display:flex;gap:4px;margin-bottom:40px}
.step-dot{flex:1;height:4px;border-radius:2px;background:var(--card);transition:.3s}
.step-dot.active{background:var(--orange)}
.step-dot.done{background:var(--green)}
.screen{display:none;animation:fadeIn .4s ease}
.screen.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.card{background:var(--card);border-radius:var(--radius);padding:28px;margin-bottom:20px;border:1px solid rgba(255,255,255,.04)}
.card h2{font-size:20px;margin-bottom:16px;color:var(--white)}
.card h3{font-size:16px;margin-bottom:12px;color:var(--light)}
.card p{font-size:14px;color:var(--muted);line-height:1.6}
label{display:block;font-size:13px;color:var(--light);margin-bottom:6px;font-weight:500}
input[type="text"],input[type="url"],input[type="password"],textarea{width:100%;padding:12px 16px;background:var(--card2);border:1px solid rgba(255,255,255,.1);border-radius:8px;color:var(--white);font-size:14px;outline:none;transition:.2s}
input:focus,textarea:focus{border-color:var(--orange);box-shadow:0 0 0 3px rgba(255,107,53,.15)}
.input-group{margin-bottom:16px}
.input-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.hint{font-size:12px;color:var(--muted);margin-top:4px}
.btn{display:inline-flex;align-items:center;gap:8px;padding:12px 28px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;border:none;transition:.2s}
.btn:hover{transform:translateY(-1px)}
.btn-primary{background:var(--orange);color:var(--white)}
.btn-primary:hover{background:#e85d2a}
.btn-primary:disabled{opacity:.5;cursor:not-allowed;transform:none}
.btn-secondary{background:var(--card2);color:var(--light);border:1px solid rgba(255,255,255,.1)}
.btn-success{background:var(--green);color:#000}
.btn-row{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}
.progress-wrap{margin:24px 0}
.progress-bar{height:8px;background:var(--card2);border-radius:4px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--orange),var(--yellow));border-radius:4px;transition:width .4s ease;width:0%}
.progress-text{display:flex;justify-content:space-between;margin-top:8px;font-size:12px;color:var(--muted)}
.log{background:var(--card2);border-radius:8px;padding:16px;max-height:400px;overflow-y:auto;font-family:'SF Mono',monospace;font-size:12px;line-height:1.8;margin-top:16px}
.log-line{color:var(--light)}
.log-line.success{color:var(--green)}
.log-line.error{color:var(--red)}
.log-line.info{color:var(--blue)}
.log-line.warn{color:var(--yellow)}
.stat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}
.stat-card{background:var(--card);border-radius:var(--radius);padding:20px;text-align:center}
.stat-card .num{font-size:36px;font-weight:800;line-height:1}
.stat-card .lbl{font-size:12px;color:var(--muted);margin-top:6px;text-transform:uppercase;letter-spacing:.5px}
.results-table{width:100%;border-collapse:collapse;margin-top:16px}
.results-table th{text-align:left;padding:10px 12px;font-size:12px;color:var(--muted);border-bottom:1px solid rgba(255,255,255,.08);text-transform:uppercase;letter-spacing:.5px}
.results-table td{padding:10px 12px;font-size:13px;color:var(--light);border-bottom:1px solid rgba(255,255,255,.04)}
.results-table tr:hover td{background:rgba(255,255,255,.02)}
.badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:600}
.badge-bad{background:rgba(255,68,68,.15);color:var(--red)}
.badge-improve{background:rgba(255,187,0,.15);color:var(--yellow)}
.badge-good{background:rgba(0,200,83,.15);color:var(--green)}
.page-tabs{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}
.page-tab{padding:8px 16px;border-radius:20px;font-size:13px;cursor:pointer;border:1px solid rgba(255,255,255,.1);color:var(--muted);transition:.2s;background:transparent}
.page-tab.active{background:var(--orange);color:var(--white);border-color:var(--orange)}
.page-tab:hover{border-color:var(--orange)}
.screenshot-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;margin-top:16px}
.screenshot-card{background:var(--card2);border-radius:8px;overflow:hidden}
.screenshot-card img{width:100%;height:160px;object-fit:cover;object-position:top}
.screenshot-card .sc-label{padding:8px 12px;font-size:12px;color:var(--light)}
.toast{position:fixed;bottom:24px;right:24px;background:var(--card);border:1px solid var(--orange);border-radius:8px;padding:14px 20px;font-size:13px;color:var(--light);z-index:1000;animation:slideUp .3s ease}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@media(max-width:768px){.stat-grid{grid-template-columns:repeat(2,1fr)}.input-row{grid-template-columns:1fr}}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:var(--card)}::-webkit-scrollbar-thumb{background:var(--card2);border-radius:3px}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <h1>CRO Pre-Audit Tool</h1>
    <span>Powered by Growisto</span>
  </div>

  <div class="steps" id="stepBar">
    <div class="step-dot active"></div>
    <div class="step-dot"></div>
    <div class="step-dot"></div>
  </div>

  <!-- SCREEN 1: Setup - ALL inputs on one page -->
  <div class="screen active" id="screen-setup">
    <div class="card">
      <h2>Project Setup</h2>
      <p style="margin-bottom:20px">Enter the client name and page URLs. The tool will automatically capture screenshots, evaluate 254 CRO parameters, and generate a professional deck.</p>
      <div class="input-group">
        <label>Client / Brand Name *</label>
        <input type="text" id="clientName" placeholder="e.g. Nike, Allbirds, Glossier">
      </div>
    </div>

    <div class="card">
      <h2>Page URLs to Audit</h2>
      <p style="margin-bottom:20px">Enter the URLs for each page type. The tool will automatically visit each URL and capture full-page screenshots. Leave blank to skip a page type.</p>
      <div class="input-group">
        <label>Home Page URL *</label>
        <input type="url" id="url-home" placeholder="https://www.example.com">
      </div>
      <div class="input-row">
        <div class="input-group">
          <label>Product Listing / Collection Page</label>
          <input type="url" id="url-plp" placeholder="https://www.example.com/collections/all">
        </div>
        <div class="input-group">
          <label>Product Detail Page</label>
          <input type="url" id="url-pdp" placeholder="https://www.example.com/products/example">
        </div>
      </div>
      <div class="input-row">
        <div class="input-group">
          <label>Cart Page</label>
          <input type="url" id="url-cart" placeholder="https://www.example.com/cart">
        </div>
        <div class="input-group">
          <label>Checkout Page</label>
          <input type="url" id="url-checkout" placeholder="https://www.example.com/checkout">
        </div>
      </div>
    </div>


    <div class="btn-row">
      <button class="btn btn-primary" onclick="startFullAudit()" id="startBtn">
        Run Full Audit &rarr;
      </button>
    </div>
  </div>

  <!-- SCREEN 2: Processing -->
  <div class="screen" id="screen-processing">
    <div class="card">
      <h2 id="processTitle">Running CRO Audit...</h2>
      <p id="processSubtitle">This may take a few minutes. The tool is capturing screenshots and evaluating parameters.</p>
      <div class="progress-wrap">
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <div class="progress-text">
          <span id="progressLabel">Initializing...</span>
          <span id="progressPercent">0%</span>
        </div>
      </div>

      <div id="screenshotPreview" class="screenshot-grid" style="margin-bottom:16px"></div>

      <div class="log" id="logBox"></div>
    </div>
  </div>

  <!-- SCREEN 3: Results -->
  <div class="screen" id="screen-results">
    <div class="stat-grid" id="statGrid"></div>

    <div class="card">
      <h2>Findings</h2>
      <div class="page-tabs" id="pageTabs"></div>
      <div style="overflow-x:auto">
        <table class="results-table" id="resultsTable">
          <thead>
            <tr>
              <th style="width:50px">#</th>
              <th>Parameter</th>
              <th style="width:100px">Page</th>
              <th style="width:100px">Principle</th>
              <th style="width:120px">Status</th>
            </tr>
          </thead>
          <tbody id="resultsBody"></tbody>
        </table>
      </div>
    </div>

    <div class="card" id="detailPanel" style="display:none">
      <h3 id="detailTitle"></h3>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:16px">
        <div>
          <label>Observation</label>
          <p id="detailObs" style="margin-top:4px;color:var(--light)"></p>
        </div>
        <div>
          <label>Recommendation</label>
          <p id="detailRec" style="margin-top:4px;color:var(--light)"></p>
        </div>
      </div>
    </div>

    <div class="btn-row">
      <button class="btn btn-secondary" onclick="downloadJSON()">Export JSON</button>
      <button class="btn btn-success" onclick="generatePPTX()">Download PPTX Deck</button>
    </div>
  </div>
</div>

<script>
// ===================================================
// EMBEDDED PARAMETERS (254 total)
// ===================================================
const PARAMETERS = {"checkout": [{"id": "checkout_001", "checkpoint": "The checkout allows the user to make a purchase as a guest (avoids unnecessary registration) - in case lead generation is not a primary conversion", "section": "General", "principle": "Friction", "has_example": true, "page_type": "checkout"}, {"id": "checkout_002", "checkpoint": "If there is a multi-step checkout, it's clear what will happen after you click CTA", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_003", "checkpoint": "The form avoids making the user start again if there's an error", "section": "General", "principle": "Friction", "has_example": false, "page_type": "checkout"}, {"id": "checkout_004", "checkpoint": "Immediately prior to commiting to the purchase, the site shows the user a clear order summary", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_005", "checkpoint": "Below the main CTA is a trust icon / seal badge (e.g. verified by Norton) along with reasurring copy \"Shop with confidence\"", "section": "General", "principle": "Motivation", "has_example": true, "page_type": "checkout"}, {"id": "checkout_006", "checkpoint": "Checkout doesn't contain any outgoing links (e.g. clickable logo, navigation and footer)", "section": "General", "principle": "Relevance", "has_example": true, "page_type": "checkout"}, {"id": "checkout_007", "checkpoint": "The site's privacy policy is easy to find, especially on pages that ask for personal information, and the policy is simple and clear", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "checkout"}, {"id": "checkout_008", "checkpoint": "Checkout offers an easy way to get in touch with the store's help center (e.g. live chat, email, phone number)", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_009", "checkpoint": "The main CTA is the most prominent element on the checkout page", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_010", "checkpoint": "The store offers upsell opportunities between the checkout page and thank you page; if the user decides to add another product to the order, he doesn't need to input all the payment info again", "section": "General", "principle": "Friction", "has_example": true, "page_type": "checkout"}, {"id": "checkout_011", "checkpoint": "After the checkout page and before the thank you page, there is an upsell step where user can add another product to the existing order", "section": "Conversion and AOV 'boosters'", "principle": "Relevance", "has_example": false, "page_type": "checkout"}, {"id": "checkout_012", "checkpoint": "The checkout page contains order bumps (e.g. \"Skip the queue\", \"Urgent shipping\", \"Gift packaging\", \"Package insurance\" with prices under $3)", "section": "Conversion and AOV 'boosters'", "principle": "Relevance", "has_example": true, "page_type": "checkout"}, {"id": "checkout_013", "checkpoint": "Urgency triggers are used (\"Your items are reserved for 10 minutes\", \"If your order is completed in the next 12 minutes, it will be shipped today\")", "section": "Conversion and AOV 'boosters'", "principle": "Motivation", "has_example": true, "page_type": "checkout"}, {"id": "checkout_014", "checkpoint": "Checkout allows users to log in so they don't need to type in all the information again", "section": "Log in and registration", "principle": "Friction", "has_example": false, "page_type": "checkout"}, {"id": "checkout_015", "checkpoint": "During registration, the password selection process is not overcomplicated with unnecessary requirements", "section": "Log in and registration", "principle": "Friction", "has_example": false, "page_type": "checkout"}, {"id": "checkout_016", "checkpoint": "Password recovery is easy", "section": "Log in and registration", "principle": "Friction", "has_example": false, "page_type": "checkout"}, {"id": "checkout_017", "checkpoint": "The layout of input fields is as simple as possible (single column, ideally)", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_018", "checkpoint": "The checkout page has the minimum amount of input fields needed for completing the purchase", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_019", "checkpoint": "The checkout page input fields are \"floating labels\" so the user can see the name of the field and its contents simultaneously", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_020", "checkpoint": "The user's email address is requested first so in case they leave the checkout, the store is able to contact them", "section": "Forms", "principle": "Relevance", "has_example": true, "page_type": "checkout"}, {"id": "checkout_021", "checkpoint": "The input fields contain suggestions (Email: e.g. john.doe@gmail.com) to decrease the user's cognitive load", "section": "Forms", "principle": "Friction", "has_example": true, "page_type": "checkout"}, {"id": "checkout_022", "checkpoint": "The checkout page has an option to check \"the billing address is the same as shipping\", so the user doesn't need to enter the same address twice", "section": "Forms", "principle": "Friction", "has_example": true, "page_type": "checkout"}, {"id": "checkout_023", "checkpoint": "Choosing a payment option (e.g. radio buttons) is easily accessible on mobile", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_024", "checkpoint": "Visual prompts are included for credit card details, such as an image of where to find the CVV code", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_025", "checkpoint": "Credit card input fields are shown on a gray background for higher (perceived) trust", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_026", "checkpoint": "Users can easily jump between input fields of a form by using the \"Tab\" key", "section": "Forms", "principle": "Friction", "has_example": false, "page_type": "checkout"}, {"id": "checkout_027", "checkpoint": "When entering data into a number-only input field (e.g. post code, phone number), a numeric keyboard is shown on mobile", "section": "Forms", "principle": "Clarity", "has_example": false, "page_type": "checkout"}, {"id": "checkout_028", "checkpoint": "When entering an email, a keyboard with dedicated buttons for @ and \".com\" is shown on mobile", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_029", "checkpoint": "Input-field width indicates the amount and format of data that needs to be entered (e.g. postal code input is smaller than address), including credit card inputs", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_030", "checkpoint": "Optional and mandatory fields are easily distinguishable", "section": "Forms", "principle": "Clarity", "has_example": false, "page_type": "checkout"}, {"id": "checkout_031", "checkpoint": "If we are asking for the phone number, we must explain beside/below the input that it's only for delivery information", "section": "Forms", "principle": "Value", "has_example": true, "page_type": "checkout"}, {"id": "checkout_032", "checkpoint": "Checkout is using a database of street addresses so the user cannot mistype the address", "section": "Forms", "principle": "Clarity", "has_example": false, "page_type": "checkout"}, {"id": "checkout_033", "checkpoint": "Input fields use inline validation with a prominent green/red border and arrow/x sign (e.g, if the email is correctly entered)", "section": "Forms", "principle": "Clarity", "has_example": true, "page_type": "checkout"}, {"id": "checkout_034", "checkpoint": "The error state of incorrectly filled out input fields clearly states what is wrong and how it should be corrected", "section": "Forms", "principle": "Value", "has_example": false, "page_type": "checkout"}, {"id": "checkout_035", "checkpoint": "The user does not need to enter the same information more than once", "section": "Forms", "principle": "Friction", "has_example": true, "page_type": "checkout"}, {"id": "checkout_036", "checkpoint": "Checkout uses an auto-complete function wherever possible (e.g. when user types in the postal code, the city gets filled out automatically)", "section": "Forms", "principle": "Friction", "has_example": true, "page_type": "checkout"}, {"id": "checkout_037", "checkpoint": "If the user leaves the checkout and then returns, the input fields will have been saved so they can continue where they left off", "section": "Forms", "principle": "Friction", "has_example": false, "page_type": "checkout"}, {"id": "checkout_038", "checkpoint": "Input fields have an option (\"X\" icon at the right side) to delete the content with one click", "section": "Forms", "principle": "Clarity", "has_example": false, "page_type": "checkout"}, {"id": "checkout_039", "checkpoint": "Users should be able to add all address details as well as select payment methods without landing on separate pages", "section": "Forms", "principle": "Friction", "has_example": false, "page_type": "checkout"}], "cart": [{"id": "cart_001", "checkpoint": "Urgency triggers are used (\"Your items are reserved for 10 minutes\", \"If you order in next 12 minutes, the order will be shipped today\"). Use tags such as Offers, Best Deal etc. on the product blocks to attract the users", "section": "General", "principle": "Motivation", "has_example": true, "page_type": "cart"}, {"id": "cart_002", "checkpoint": "The cart page clearly informs the user how far away they are from the threshold for free shipping (or a x% discount)", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "cart"}, {"id": "cart_003", "checkpoint": "If the user already reached the threshold for free shipping, the cart prominently highlights that (e.g. bold, green)", "section": "General", "principle": "Friction", "has_example": true, "page_type": "cart"}, {"id": "cart_004", "checkpoint": "When the user returns to the site, the items that they placed in the cart are still there (Cart abandonment check)", "section": "General", "principle": "Friction", "has_example": true, "page_type": "cart"}, {"id": "cart_005", "checkpoint": "All important product information is shown in the cart (title, image, chosen variant, quantity, price) - within first fold", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "cart"}, {"id": "cart_006", "checkpoint": "The cart allows you to change the quantity of the product and automatically updates the cart. Users should be allowed to change the quantity of products in the cart by only clicking on the +/- buttons", "section": "General", "principle": "Friction", "has_example": true, "page_type": "cart"}, {"id": "cart_007", "checkpoint": "Customers can \u201csave products / cart for later\u201d instead of deleting them", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "cart"}, {"id": "cart_008", "checkpoint": "The cart shows the day of expected delivery", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "cart"}, {"id": "cart_009", "checkpoint": "Scarcity triggers are shown next to each item (\"Only 1 item in stock\") in a prominent color (e.g. red, orange)", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "cart"}, {"id": "cart_010", "checkpoint": "The cart offers an easy way to get in touch with the store's help center (e.g. live chat, email, phone number)", "section": "General", "principle": "Value", "has_example": true, "page_type": "cart"}, {"id": "cart_011", "checkpoint": "Information about returns, refunds and a money-back guarantee is shown (if on external pages, a small pop-up window appears instead of redirecting the customer away from the cart)", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "cart"}, {"id": "cart_012", "checkpoint": "The cart offers a way to enter a coupon code but with a hidden input field (so users won't go searching for coupon codes on Google)", "section": "General", "principle": "Motivation", "has_example": true, "page_type": "cart"}, {"id": "cart_013", "checkpoint": "The cart offers (inexpensive) upsell/cross-sell products with benefits and urgency (\"Now or never\") and a special discount (e.g. 50% OFF)", "section": "General", "principle": "Relevance", "has_example": true, "page_type": "cart"}, {"id": "cart_014", "checkpoint": "The subtotal price is prominent and placed near the main CTA. Display the total price right below the Total column for a better UI experience and capitalize \u2018t\u2019 in \u2018total\u2019", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "cart"}, {"id": "cart_015", "checkpoint": "Estimated taxes are shown. Display the taxes (if applicable) in the cart price summary", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "cart"}, {"id": "cart_016", "checkpoint": "The shopper is shown how much they will save on their entire purchase near main CTA", "section": "CTA area", "principle": "Value", "has_example": true, "page_type": "cart"}, {"id": "cart_017", "checkpoint": "The main CTA includes what will happen next (\"Proceed to a secure checkout\") and is the most prominent element and duplicated at the top and bottom of the page", "section": "CTA area", "principle": "Relevance", "has_example": true, "page_type": "cart"}, {"id": "cart_018", "checkpoint": "The main CTA (\"Proceed to a secure checkout\") includes a lock icon on a distinctive (gray) background", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "cart"}, {"id": "cart_019", "checkpoint": "Below the main CTA is a trust icon / seal badge (e.g. verified by Norton) along with reassuring copy \"Shop with confidence\"", "section": "CTA area", "principle": "Motivation", "has_example": true, "page_type": "cart"}, {"id": "cart_020", "checkpoint": "Alternative payment options are shown below the main CTA button (e.g. PayPal, Amazon Pay, Google Pay)", "section": "CTA area", "principle": "Value", "has_example": false, "page_type": "cart"}, {"id": "cart_021", "checkpoint": "Images of all available installment methods are shown (e.g. Klarna) with clear monthly payment and duration info (especially useful for more expensive products)", "section": "CTA area", "principle": "Value", "has_example": false, "page_type": "cart"}, {"id": "cart_022", "checkpoint": "A secondary CTA \"Continue shopping\" button is available on the cart page", "section": "CTA area", "principle": "Clarity", "has_example": false, "page_type": "cart"}], "pdp": [{"id": "pdp_001", "checkpoint": "Sticky navigation with product name, product image, product page sections, availability, old price, new price, discount and CTA that hides when the user is scrolling down but reappears when the user scrolls up", "section": "General", "principle": "Friction", "has_example": true, "page_type": "pdp"}, {"id": "pdp_002", "checkpoint": "Clicking the back button always takes the user back to the page the user came from", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_003", "checkpoint": "Product titles are descriptive; the main product title is visually prominent compared to other content", "section": "Product overview (above the CTA area)", "principle": "Value", "has_example": true, "page_type": "pdp"}, {"id": "pdp_004", "checkpoint": "The product title is under 65 characters so it appears fully in Google search results", "section": "Product overview (above the CTA area)", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_005", "checkpoint": "The product subtitle highlight key product benefit and contain power words, e.g. effortless, incredible, absolute, unique, secret, now, new, exclusive, how to, why", "section": "Product overview (above the CTA area)", "principle": "Value", "has_example": true, "page_type": "pdp"}, {"id": "pdp_006", "checkpoint": "Product rating overviews are shown near product titles that are linked (with click & scroll) to product reviews (e.g. 4.6, Read 5 Reviews)", "section": "Product overview (above the CTA area)", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_007", "checkpoint": "A short list of other key benefits of the product is near the main title and linked to a detailed description (with green check arrows)", "section": "Product overview (above the CTA area)", "principle": "Value", "has_example": true, "page_type": "pdp"}, {"id": "pdp_008", "checkpoint": "There is a gallery with different product photos", "section": "Image gallery", "principle": "Value", "has_example": true, "page_type": "pdp"}, {"id": "pdp_009", "checkpoint": "The product gallery shows thumbnails of other available images", "section": "Image gallery", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_010", "checkpoint": "The product gallery contains arrows to navigate between images", "section": "Image gallery", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_011", "checkpoint": "The product gallery supports swipe actions on mobile devices", "section": "Image gallery", "principle": "Friction", "has_example": true, "page_type": "pdp"}, {"id": "pdp_012", "checkpoint": "There are images for different product variants/sizes", "section": "Image gallery", "principle": "Value", "has_example": false, "page_type": "pdp"}, {"id": "pdp_013", "checkpoint": "The main CTA is the most visible element on the product page and contains the \"cart\" icon", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_014", "checkpoint": "Product variants are easily accessible on mobile and big enough with enough white space around to prevent misclicks", "section": "CTA area", "principle": "Friction", "has_example": true, "page_type": "pdp"}, {"id": "pdp_015", "checkpoint": "The product variant selection is connected with the product gallery and shows images of chosen product variants", "section": "CTA area", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_016", "checkpoint": "A visible reminder is included to select size/color if a customer forgets and clicks \"add to cart\" too early", "section": "CTA area", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_017", "checkpoint": "A size chart (or link that opens in a small popup and is easily closed on mobile) is provided near the size selections (for products with different sizes)", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_018", "checkpoint": "Product descriptions mention the size of the model and the size of the shirt the model is wearing (only for apparel)", "section": "CTA area", "principle": "Value", "has_example": false, "page_type": "pdp"}, {"id": "pdp_019", "checkpoint": "Interactive selectors are used for quantity selection instead of dropdowns (the price and quantity are changed in real-time, without triggering a page reload)", "section": "CTA area", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_020", "checkpoint": "The CTA copy clearly explains what will happen when you click on it (e.g. Proceed to secure checkout)", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_021", "checkpoint": "Clear feedback is provided once the product has been added to the cart (e.g. a number in the mini-cart widget increases)", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_022", "checkpoint": "The main CTA change states once users add a product to the cart (e.g. \"[check arrow] Product added to your cart\" and after 2 seconds \"Go to my shopping cart [right arrow]\")", "section": "CTA area", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_023", "checkpoint": "The price of the product is prominent enough, especially if it's discounted; The price of the product is placed near the main CTA", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_024", "checkpoint": "The background color of the product's primary CTA differs from other elements (e.g. slightly grey)", "section": "CTA area", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_025", "checkpoint": "All additional charges that may apply are shown near the main CTA (e.g. additional shipping costs due to product size, VAT)", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_026", "checkpoint": "If free shipping is offered, it's highlighted near the main CTA", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_027", "checkpoint": "All shipping information is shown near the main CTA (delivery to shopper's location, shopper's country flag, cost, time)", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_028", "checkpoint": "Availability of the product is shown near the main CTA (e.g. \"In stock\")", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_029", "checkpoint": "The old price (with a strike-trough) is shown with the new price and how much shoppers will save (% or $) when the product is on sale", "section": "CTA area", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_030", "checkpoint": "Clear information is shown about returns, refunds and money-back guarantee", "section": "CTA area", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_031", "checkpoint": "Product page highlights logos of news sites/blogs/celebrities where the product/brand has had PR exposure (e.g. \"Used by executives at Fortune 500\" )", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_032", "checkpoint": "Customer reviews are shown with a review title, customer photos of product, star rating, photo of reviewer, name and last name, \"verified\" buyer, occupation, and age", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_033", "checkpoint": "Customer reviews visually stand out from other content (ideally on a slightly yellow background)", "section": "Social proof", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_034", "checkpoint": "Product overall star ratings are shown and can be filtered by the star rating", "section": "Social proof", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_035", "checkpoint": "Product page contains the number of customers this week/month/all-time (e.g. \"19,222 products successfully shipped and delivered this month alone\")", "section": "Social proof", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_036", "checkpoint": "Product page contains video testimonials", "section": "Social proof", "principle": "Motivation", "has_example": false, "page_type": "pdp"}, {"id": "pdp_037", "checkpoint": "Product page contains the number of Facebook and Twitter followers", "section": "Social proof", "principle": "Motivation", "has_example": false, "page_type": "pdp"}, {"id": "pdp_038", "checkpoint": "Display all reviews in a paginated view, with most recent reviews shown first", "section": "Social proof", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_039", "checkpoint": "Do not put verified buyer tag against all the reviews posted", "section": "Social proof", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_040", "checkpoint": "Only display the reviews whose character length is greater than 40", "section": "Social proof", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_041", "checkpoint": "Only filter reviews by recent, highest and lowest rating", "section": "Social proof", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_042", "checkpoint": "Clear quantity discounts are offered near the main CTA (1x $24.99/piece, [\"Top choice\" badge]; 2x 19,99\u20ac/piece, [\"Recommended\" badge]; 3x $17,49/piece, [\"Best value\" badge])", "section": "Conversion and AOV 'boosters'", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_043", "checkpoint": "Relevant cross-sell/up-sell products are offered", "section": "Conversion and AOV 'boosters'", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_044", "checkpoint": "Relevant bundle products are offered with prominent discounts", "section": "Conversion and AOV 'boosters'", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_045", "checkpoint": "Urgency triggers are used (e.g. \"Today only\", \"Black Friday offer\", \"Free bonus\", \"If order is placed in the next 12 min, it will be shipped today\") near the main CTA", "section": "Conversion and AOV 'boosters'", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_046", "checkpoint": "Scarcity triggers are used (e.g. \"Only 3 products left\") near the main CTA", "section": "Conversion and AOV 'boosters'", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_047", "checkpoint": "Customers are shown how many people have viewed and bought the product in the last 24 hours", "section": "Conversion and AOV 'boosters'", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_048", "checkpoint": "A store is giving away a small percentage of the profit to charity; and highlights this information", "section": "Conversion and AOV 'boosters'", "principle": "Motivation", "has_example": false, "page_type": "pdp"}, {"id": "pdp_049", "checkpoint": "The product page contains \"Visitors who viewed this product also viewed...\" where users are shown complementary OR/AND alternative products", "section": "Conversion and AOV 'boosters'", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_050", "checkpoint": "The product description is easy to read (font size, contrast, single column, 75 characters per line, line-height 1.5, max. 4 lines long)", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_051", "checkpoint": "Product information structure is easy to scan (grouped information, bullet points, important benefits highlighted)", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_052", "checkpoint": "The sections of the page (\"General\", \"Technical info\") are grouped together in accordion (if they are longer) and scannable on mobile", "section": "Product description", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_053", "checkpoint": "Section titles explain benefits (and not features) of the product", "section": "Product description", "principle": "Value", "has_example": true, "page_type": "pdp"}, {"id": "pdp_054", "checkpoint": "Customers are shown all the things that are included in the product (ideally with an included photo)", "section": "Product description", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_055", "checkpoint": "Product page contains customer FAQs (for each specific product as well as store-wide questions)", "section": "Product description", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_056", "checkpoint": "The table of technical specifications is readable (different colors of lines, hover state of the line, not too far apart)", "section": "Product description", "principle": "Clarity", "has_example": true, "page_type": "pdp"}, {"id": "pdp_057", "checkpoint": "Product page offers product comparisons", "section": "Product description", "principle": "Relevance", "has_example": true, "page_type": "pdp"}, {"id": "pdp_058", "checkpoint": "Product description explains how to use the product in 3 easy steps", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_059", "checkpoint": "Product page contains embedded reviews (or screenshots) from social networks (e.g. Facebook post, Messenger, Whatsapp, Tweet, Instagram post, Instagram PM, Viber, text message)", "section": "Product description", "principle": "Motivation", "has_example": true, "page_type": "pdp"}, {"id": "pdp_060", "checkpoint": "Use marketing tags on images such as sale, new, save 50% etc", "section": "Product description", "principle": "Motivation", "has_example": false, "page_type": "pdp"}, {"id": "pdp_061", "checkpoint": "User should be able to view product title, price, variants, short description", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_062", "checkpoint": "The CTAs should be highlighted clearly and accessible to users", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_063", "checkpoint": "If feasible, add a pop-up which will be triggered when a customer adds product to the cart", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_064", "checkpoint": "The pop-up should display, Product image carousel, CTA to add product to the cart, price, title, discounted price etc.", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_065", "checkpoint": "Once the pop-up is closed it should not be displayed until current user session is terminated", "section": "Product description", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_066", "checkpoint": "Display information in a readable format such as tables", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}, {"id": "pdp_067", "checkpoint": "Center align the product information in the product block", "section": "Product description", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_068", "checkpoint": "Display the recent 4 products visited by the users", "section": "Product description", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_069", "checkpoint": "Allow users to add products to cart directly from the product block in the slider", "section": "Product description", "principle": "Friction", "has_example": false, "page_type": "pdp"}, {"id": "pdp_070", "checkpoint": "Keep the slider design consistent with the other sliders used on the website.", "section": "Product description", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_071", "checkpoint": "Keep the quantity field non-editable i.e. user cannot add characters directly in the field", "section": "Product description", "principle": "Relevance", "has_example": false, "page_type": "pdp"}, {"id": "pdp_072", "checkpoint": "Use +/- icons as buttons to increment or decrement the quantity.", "section": "Product description", "principle": "Clarity", "has_example": false, "page_type": "pdp"}], "home": [{"id": "home_001", "checkpoint": "The home page promotes site-wide offers on top of the page (e.g. Free Shipping) with urgency and scarcity triggers", "section": "General", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_002", "checkpoint": "The home page is professionally designed, not overloaded, and it creates a positive first impression", "section": "General", "principle": "Relevance", "has_example": true, "page_type": "home"}, {"id": "home_003", "checkpoint": "Once you land on the homepage, you know the main products that the store is selling", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "home"}, {"id": "home_004", "checkpoint": "The home page follows a clear, straightfowrard visual hierarchy", "section": "General", "principle": "Relevance", "has_example": true, "page_type": "home"}, {"id": "home_005", "checkpoint": "The value proposition is clearly stated on the home page (e.g. with a tagline or welcome blurb)", "section": "General", "principle": "Value", "has_example": true, "page_type": "home"}, {"id": "home_006", "checkpoint": "The home page contains meaningful high-quality graphics, not clip art or pictures of models", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "home"}, {"id": "home_007", "checkpoint": "The home page contains one or two (e.g. Shop for men, Shop for women) visually prominent CTAs above the fold and it has relevant copy (e.g. Start shopping)", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "home"}, {"id": "home_008", "checkpoint": "The home page highlights any specific deals, special offers or urgency offers near the top", "section": "General", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_009", "checkpoint": "The home page highlights the main benefits of shopping with you (e.g. \"Vegan friendly\", \"We give back to charity\", \"Not tested on animals\", \"19,222 products successfully shipped and delivered this month alone\")", "section": "General", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_010", "checkpoint": "The most important product categories are shown first, with descriptive photos near the top of the homepage", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "home"}, {"id": "home_011", "checkpoint": "The store uses special category pages (best-sellers, new, sale, \"30% off\", etc.) that take users into a shopping mode", "section": "General", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_012", "checkpoint": "There is a short list of the most important products supplemented with links on the home page", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "home"}, {"id": "home_013", "checkpoint": "The home page contains an option for customers to contact the store (e.g. live chat, email, or phone number)", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "home"}, {"id": "home_014", "checkpoint": "The home page shows recently viewed items for returning visitors", "section": "General", "principle": "Relevance", "has_example": true, "page_type": "home"}, {"id": "home_015", "checkpoint": "The story of the founders behind the product and store is shown, along with their mission and vision", "section": "General", "principle": "Clarity", "has_example": true, "page_type": "home"}, {"id": "home_016", "checkpoint": "Provide coupons on successful email subscription", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_017", "checkpoint": "The banners should have CTAs associated and visible", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_018", "checkpoint": "There should be separate banner for mobile (portrait view) and desktop (landscape view)", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_019", "checkpoint": "The grid should display all categories/ collections that are most viewed by the customers", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_020", "checkpoint": "Category block in the grid should have a CTA to redirect to the category listing page", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_021", "checkpoint": "Include the categories grid in a single view port", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_022", "checkpoint": "Ask the user questions which can be answered using product attribute selections", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_023", "checkpoint": "Ask most 5-7 questions in the quiz", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_024", "checkpoint": "All the permutations of responses should be mapped to at least one product on the website", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_025", "checkpoint": "Slider should include 8-10 products only along with a View All CTA to view the entire collection", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_026", "checkpoint": "In case there is only one variant attribute, it can be displayed in the slider product block itself", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_027", "checkpoint": "User should be able to view products on sale with countdown timer", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_028", "checkpoint": "Once countdown is over the slider should be hidden and slider should not be accessible", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_029", "checkpoint": "If applicable/ feasible, Add a banner section occupying half width of the viewport", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_030", "checkpoint": "Add CTA in the banner image", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_031", "checkpoint": "On click of the CTA the product block should be visible in the other half of the viewport", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_032", "checkpoint": "The product block will change when the users clicks on the other products on the banner", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_033", "checkpoint": "Users should be able to Add product to cart, buy now, wishlist, compare etc", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_034", "checkpoint": "Banners should communicate the USPs or the benefits that the users are eligible for on clicking the banners", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_035", "checkpoint": "Use high resolution product images on the banners", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_036", "checkpoint": "Display the product image and the link to the PDP of the product being reviewed", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_037", "checkpoint": "Where am I? What is this page about? What can I do here?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_038", "checkpoint": "Can I understand what the product / service is, and how it works (in a reasonable amount of time)?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_039", "checkpoint": "Are there supporting images and/or videos that help me understand the product or service? E.g. diagrams, graphs, flow charts and other visuals in preference to wordy blocks of text?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_040", "checkpoint": "Are all important associated pieces of information clear (pricing, shipping info, warranty, return policy etc)?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_041", "checkpoint": "Is it clear what I have to do next? Is there a clear primary Call-to-Action? Does it stand out visually?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_042", "checkpoint": "Is there strong visual hierarchy in place, including clear visual contrast between elements?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_043", "checkpoint": "If there\u2019s information below the fold, is it clear that you should scroll?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_044", "checkpoint": "Is the body copy font size large enough for easy reading? In most cases the optimal size is 16px, but that depends on the font.", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_045", "checkpoint": "Is the page / site is free from complicated language and jargon that the user may not understand?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_046", "checkpoint": "Is the information architecture and wording clear?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_047", "checkpoint": "Pages are quick to scan, with ample headings and subheadings and short paragraphs?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_048", "checkpoint": "Is it clear what range of pricing is offered (low/mid/high)?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_049", "checkpoint": "Is it easy to compare options? Does the site help users overcoming paradox of choice?", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_050", "checkpoint": "Is there sufficient informaiton about the product, e.g. technical specs, dimensions, materials.", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_051", "checkpoint": "If the user came from an external site (Google search, PPC, referral etc), will the user recognize that it\u2019s a continuation of their journey?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_052", "checkpoint": "Does the headline match the page content?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_053", "checkpoint": "Are the images relevant to the content?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_054", "checkpoint": "Is information related to the main call to action?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_055", "checkpoint": "Are there secondary calls to action to learn more about the product in the key funnels?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_056", "checkpoint": "Is it clear what people are getting when they click a button / fill a form?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_057", "checkpoint": "Is information related to the main call to action?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_058", "checkpoint": "Page is free from elements that are not directly contributing to visitors taking desired action?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_059", "checkpoint": "Are less important things also less important design wise?", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "home"}, {"id": "home_060", "checkpoint": "Does the page / site communicate a Value Proposition?", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_061", "checkpoint": "Is the Value proposition clear and easy to understand", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_062", "checkpoint": "Is it clear how the offering is beneficial to me?", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_063", "checkpoint": "Is there a clear, benefit-driven offer?", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_064", "checkpoint": "Are features translated into benefits?", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_065", "checkpoint": "Is there sufficient product information to support decision making?", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_066", "checkpoint": "Is it clear what people are getting for their money?", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_067", "checkpoint": "There are clear reasons why the user should choose the product / brand", "section": "General", "principle": "Value", "has_example": false, "page_type": "home"}, {"id": "home_068", "checkpoint": "Any logical breaks that stop the eye flow? (Scroll stoppers )", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_069", "checkpoint": "The site can be used without scrolling horizontally?", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_070", "checkpoint": "The site is free from low contrast issues between text and background colours causing poor readability.", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_071", "checkpoint": "Things that are clickable (like buttons) are obviously pressable (Hypertext links are easy to identify without needing to 'minesweep' )", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_072", "checkpoint": "Items that aren't clickable do not have characteristics that suggest that they are", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_073", "checkpoint": "Does the site use chunking / tunneling for complex / difficult tasks? (E.g. easy questions first)", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_074", "checkpoint": "Are the processes short and uncomplicated? (Do multi step processes feature only necessary steps?)", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_075", "checkpoint": "Is only essential information asked for?", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_076", "checkpoint": "Does the site answer typical questions/objections on transactional pages?", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_077", "checkpoint": "The site carries out field-level checking and form-level checking at the appropriate time on deata entry screens", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_078", "checkpoint": "Are forms designed for simplicity", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_079", "checkpoint": "Error messages contain clear instructions on what to do next", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_080", "checkpoint": "Is there an explanation why information is needed?", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_081", "checkpoint": "Error messages are written in a non-derisory tone and do not blame the user for the error", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_082", "checkpoint": "There are no blinking banners or automatic sliders", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_083", "checkpoint": "Everything on the page is essential? (There is nothing on the page that could be removed without compromising performance?)", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_084", "checkpoint": "There is no copy that is not about the specific action we want people to take?", "section": "General", "principle": "Friction", "has_example": false, "page_type": "home"}, {"id": "home_085", "checkpoint": "Is there some sort of believable urgency?", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_086", "checkpoint": "Are any motivators used?", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_087", "checkpoint": "Is the copy persuasive?", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_088", "checkpoint": "Does the site create a fun user experience? (Gamification?)", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_089", "checkpoint": "Is there a clear reason to take action right here and right now?", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_090", "checkpoint": "Are free gifts /coupons / elements of reciprocity used?", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_091", "checkpoint": "Is a free try out possible?", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_092", "checkpoint": "Does the page use tactics of consistency & commitment", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_093", "checkpoint": "Are free gifts / elements of reciprocity used?", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_094", "checkpoint": "Positive UX / interaction (e.g. inline instant validation, cheering)", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_095", "checkpoint": "Button labels and link labels start with action words", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_096", "checkpoint": "Is stock availability utilised (e.g. only 3 left in stock)", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_097", "checkpoint": "Does the page include offer expiration dates", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_098", "checkpoint": "The home page contains general customer reviews or product specifics with a link to the product itself", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_099", "checkpoint": "The home page shows overall store ratings from authoritative review sites (e.g. Trustpilot, Reviews.com, Yotpo, Podium)", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_100", "checkpoint": "The home page contains awards, trust-badges, and certificates earned by the store", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_101", "checkpoint": "The home page highlights logos of news sites/blogs/celebrities where the product/brand has had any PR exposure (e.g. \"Used by executives at Fortune 500\")", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_102", "checkpoint": "The home page highlights logos of well-known brands", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_103", "checkpoint": "The home page contains user-generated photos (e.g. from Instagram)", "section": "Social proof", "principle": "Motivation", "has_example": true, "page_type": "home"}, {"id": "home_104", "checkpoint": "If possible display the reviews of influencers in the reviews section for increased credibility", "section": "Social proof", "principle": "Motivation", "has_example": false, "page_type": "home"}, {"id": "home_105", "checkpoint": "Display the average rating of all reviews posted on the website and the total reviews posted in the website", "section": "Social proof", "principle": "Clarity", "has_example": false, "page_type": "home"}, {"id": "home_106", "checkpoint": "Display only the reviews posted by the verified buyers on the website and assign a verified buyer tag to such reviews for distinction", "section": "Social proof", "principle": "Relevance", "has_example": false, "page_type": "home"}], "search": [{"id": "search_001", "checkpoint": "Keep the search field open and accessible on single click", "section": "General", "principle": "Friction", "has_example": true, "page_type": "search"}, {"id": "search_002", "checkpoint": "Include advanced search option to allow users to search for specific product only", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "search"}, {"id": "search_003", "checkpoint": "Behaviours of contrast and font highlighting are used to make search bar standout", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "search"}, {"id": "search_004", "checkpoint": "The search bar is not hidden inside a mega or hamburger menu", "section": "General", "principle": "Friction", "has_example": false, "page_type": "search"}, {"id": "search_005", "checkpoint": "The search bar is not overshadowed by any other element of the website", "section": "General", "principle": "Friction", "has_example": false, "page_type": "search"}, {"id": "search_006", "checkpoint": "If feasible, allow users to upload images and display products with similar images", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "search"}, {"id": "search_007", "checkpoint": "The search bar shows dynamic recommendation even when not in use", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "search"}, {"id": "search_008", "checkpoint": "Provide search autocompletion to suggest common queries", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "search"}, {"id": "search_009", "checkpoint": "Product recommendations should be given to allow easy product discovery", "section": "General", "principle": "Motivation", "has_example": false, "page_type": "search"}, {"id": "search_010", "checkpoint": "Keyword tagging is clearly reflecting in the search recommendations", "section": "General", "principle": "Value", "has_example": false, "page_type": "search"}, {"id": "search_011", "checkpoint": "The search delivers results when an enter key is pressed or a mouse click is done on the search icon", "section": "General", "principle": "Friction", "has_example": false, "page_type": "search"}, {"id": "search_012", "checkpoint": "Users should also be given recommendations based on the previous searches on the chat", "section": "General", "principle": "Value", "has_example": false, "page_type": "search"}, {"id": "search_013", "checkpoint": "Allow users to filter the search results to best fit their needs", "section": "General", "principle": "Relevance", "has_example": false, "page_type": "search"}, {"id": "search_014", "checkpoint": "Multiple sort options should be available on the search results page, such as most relevant, price A to Z, etc.", "section": "General", "principle": "Clarity", "has_example": false, "page_type": "search"}, {"id": "search_015", "checkpoint": "The filter and sort section is made sticky on the SERP, CLP, etc.", "section": "General", "principle": "Friction", "has_example": false, "page_type": "search"}]};

// ===================================================
// KEY MANAGEMENT (obfuscated  not plain text in source)
// ===================================================
const _k = (c) => { const b = c.join(''); const d = atob(b); return d.split('').reverse().join(''); };
const _c = ["QUFnTy0x","YzctZzBk","QXg0Z3o5","RWN6bFpB","N2dQUVJ1","aDlJZ25V","bUpneGlV","MzhPY2tz","cm1nR2h4","VmJUR1Nq","SFZqTXpX","cFJtS0ZO","QWRLX2xS","aXBVUlpn","VzcyMmRW","dE16WFQt","MzBpcGEt","dG5hLWtz"];
const _p = ["c2tBVGNM","ZUh3WWU0","MV9fWHF2","dnpRakZC","RUtjMVlv","dFZCeVNh","eklB"];

// ===================================================
// STATE
// ===================================================
const state = {
  clientName: '',
  apiKey: '',
  psKey: '',
  urls: {},
  screenshotB64: {},
  evaluations: {},
  errors: [],
  currentFilter: 'all'
};

const PAGE_LABELS = {
  home: 'Home Page', plp: 'Product Listing (PLP)', pdp: 'Product Detail (PDP)',
  cart: 'Cart Page', checkout: 'Checkout Page'
};
const PAGE_PARAM_MAP = { home: 'home', plp: 'search', pdp: 'pdp', cart: 'cart', checkout: 'checkout' };

// Keys are decoded at runtime only when needed
function _getClaudeKey() { return _k(_c); }
function _getPSKey() { return _k(_p); }

// ===================================================
// NAVIGATION
// ===================================================
function goToScreen(id, stepIdx) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.step-dot').forEach((d,i) => {
    d.className = 'step-dot' + (i < stepIdx ? ' done' : i === stepIdx ? ' active' : '');
  });
  window.scrollTo(0,0);
}

// ===================================================
// SCREENSHOT CAPTURE - Google PageSpeed
// ===================================================
async function captureViaPageSpeed(url) {
  const psKey = _getPSKey();
  const apiUrl = `https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=${encodeURIComponent(url)}&strategy=desktop&category=performance&key=${psKey}`;
  const resp = await fetch(apiUrl);
  if (!resp.ok) throw new Error(`PageSpeed API error: ${resp.status}`);
  const data = await resp.json();

  // Try full-page screenshot first
  let ssData = null;
  if (data.lighthouseResult?.fullPageScreenshot?.screenshot?.data) {
    ssData = data.lighthouseResult.fullPageScreenshot.screenshot.data;
  }
  // Fallback to final-screenshot audit
  if (!ssData && data.lighthouseResult?.audits?.['final-screenshot']?.details?.data) {
    ssData = data.lighthouseResult.audits['final-screenshot'].details.data;
  }
  if (!ssData) throw new Error('No screenshot in PageSpeed response');

  // ssData is a data URI like "data:image/jpeg;base64,..."
  const b64 = ssData.replace(/^data:image\/\w+;base64,/, '');

  // Also extract performance metrics
  const perf = {};
  try {
    const cats = data.lighthouseResult?.categories || {};
    perf.score = cats.performance?.score;
    const audits = data.lighthouseResult?.audits || {};
    perf.fcp = audits['first-contentful-paint']?.displayValue;
    perf.lcp = audits['largest-contentful-paint']?.displayValue;
    perf.cls = audits['cumulative-layout-shift']?.displayValue;
    perf.tbt = audits['total-blocking-time']?.displayValue;
    perf.si = audits['speed-index']?.displayValue;
  } catch(e) {}

  return { b64, perf, mediaType: 'image/jpeg' };
}

// ===================================================
// SCREENSHOT CAPTURE - ScreenshotOne API
// ===================================================
async function captureViaScreenshotOne(url, accessKey) {
  const apiUrl = `https://api.screenshotone.com/take?access_key=${accessKey}&url=${encodeURIComponent(url)}&full_page=true&viewport_width=1280&viewport_height=900&format=png&block_ads=true&delay=3&timeout=30`;
  const resp = await fetch(apiUrl);
  if (!resp.ok) throw new Error(`ScreenshotOne error: ${resp.status} ${resp.statusText}`);
  const blob = await resp.blob();
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => {
      const b64 = reader.result.split(',')[1];
      resolve({ b64, perf: {}, mediaType: 'image/png' });
    };
    reader.onerror = reject;
    reader.readAsDataURL(blob);
  });
}

// ===================================================
// MAIN AUDIT FLOW
// ===================================================
async function startFullAudit() {
  // Validate inputs
  const name = document.getElementById('clientName').value.trim();
  const homeUrl = document.getElementById('url-home').value.trim();
  if (!name || !homeUrl) { toast('Please fill in client name and at least the home page URL.'); return; }

  state.clientName = name;
  state.apiKey = _getClaudeKey();
  state.urls = {};
  ['home','plp','pdp','cart','checkout'].forEach(pt => {
    const v = document.getElementById('url-'+pt).value.trim();
    if (v) state.urls[pt] = v;
  });

  // Disable button and reset errors
  state.errors = [];
  document.getElementById('startBtn').disabled = true;
  goToScreen('screen-processing', 1);

  const log = document.getElementById('logBox');
  const preview = document.getElementById('screenshotPreview');
  log.innerHTML = '';
  preview.innerHTML = '';
  const addLog = (msg, cls='') => { log.innerHTML += `<div class="log-line ${cls}">${msg}</div>`; log.scrollTop = log.scrollHeight; };
  const setProgress = (pct, label) => { document.getElementById('progressFill').style.width=pct+'%'; document.getElementById('progressPercent').textContent=Math.round(pct)+'%'; document.getElementById('progressLabel').textContent=label; };

  addLog(`Starting CRO Pre-Audit for ${state.clientName}`, 'info');
  addLog(`Pages to audit: ${Object.keys(state.urls).map(p => PAGE_LABELS[p]).join(', ')}`, 'info');
  addLog(`Screenshot method: Google PageSpeed Insights`, 'info');
  addLog('', '');

  //  PHASE 1: CAPTURE SCREENSHOTS 
  const pageList = Object.keys(state.urls);
  const totalPages = pageList.length;
  state.screenshotB64 = {};
  state.perfData = {};

  for (let i = 0; i < pageList.length; i++) {
    const pt = pageList[i];
    const url = state.urls[pt];
    setProgress(5 + (i / totalPages) * 30, `Capturing ${PAGE_LABELS[pt]}...`);
    addLog(`[${i+1}/${totalPages}] Capturing screenshot: ${PAGE_LABELS[pt]}`, 'info');
    addLog(`    URL: ${url}`, '');

    try {
      let result;
      addLog(`    Capturing via Google PageSpeed (takes 15-30 seconds)...`, 'warn');
      result = await captureViaPageSpeed(url);

      state.screenshotB64[pt] = { desktop: result.b64, mediaType: result.mediaType };
      state.perfData[pt] = result.perf || {};

      // Show preview
      const card = document.createElement('div');
      card.className = 'screenshot-card';
      card.innerHTML = `<img src="data:${result.mediaType};base64,${result.b64}"><div class="sc-label">${PAGE_LABELS[pt]}</div>`;
      preview.appendChild(card);

      addLog(`    Screenshot captured successfully`, 'success');
      if (result.perf?.score != null) {
        addLog(`    Performance score: ${Math.round(result.perf.score * 100)}/100 | FCP: ${result.perf.fcp || 'N/A'} | LCP: ${result.perf.lcp || 'N/A'}`, '');
      }
    } catch (err) {
      addLog(`    ERROR: ${err.message}`, 'error');
      addLog(`    Skipping this page.`, 'error');
      state.errors.push(`Screenshot ${PAGE_LABELS[pt]}: ${err.message}`);
    }
    addLog('', '');
  }

  const capturedPages = Object.keys(state.screenshotB64);
  if (capturedPages.length === 0) {
    addLog('FATAL: No screenshots captured. Please check your URLs and try again.', 'error');
    document.getElementById('startBtn').disabled = false;
    return;
  }

  addLog(`Screenshots captured for ${capturedPages.length} pages`, 'success');
  addLog('', '');

  //  PHASE 2: AI EVALUATION 
  addLog('Starting AI parameter evaluation...', 'info');

  let totalBatches = 0;
  capturedPages.forEach(pt => {
    const paramKey = PAGE_PARAM_MAP[pt] || pt;
    totalBatches += Math.ceil((PARAMETERS[paramKey] || []).length / 25);
  });

  let completedBatches = 0;
  state.evaluations = {};

  for (const pt of capturedPages) {
    const paramKey = PAGE_PARAM_MAP[pt] || pt;
    const params = PARAMETERS[paramKey] || [];
    if (params.length === 0) { addLog(`  No parameters for ${pt}, skipping`, 'warn'); continue; }

    addLog(`Evaluating ${PAGE_LABELS[pt]}: ${params.length} parameters...`, 'info');
    state.evaluations[pt] = [];

    const imgB64 = state.screenshotB64[pt].desktop;
    const mediaType = state.screenshotB64[pt].mediaType || 'image/jpeg';

    for (let i = 0; i < params.length; i += 25) {
      const batch = params.slice(i, i + 25);
      const batchNum = Math.floor(i / 25) + 1;
      const totalPageBatches = Math.ceil(params.length / 25);
      const overallPct = 35 + (completedBatches / totalBatches) * 55;
      setProgress(overallPct, `${PAGE_LABELS[pt]}  batch ${batchNum}/${totalPageBatches}`);

      const paramsText = batch.map((p, j) => `${j+1}. [${p.id}] (${p.principle || 'General'}) ${p.checkpoint}`).join('\n');

      const content = [
        { type: "text", text: `You are a senior CRO expert conducting a pre-audit of an ecommerce website.\n\nAnalyze the screenshot of the ${PAGE_LABELS[pt]} and evaluate each parameter below.\n\nFor each parameter, provide your evaluation as a JSON object:\n{"id": "param_id", "evaluation": "Good|Bad|Can be Improved", "observation": "2-3 sentences about what you see", "recommendation": "2-3 specific, actionable recommendations"}\n\nReturn ONLY a valid JSON array. No other text.\n\nParameters:\n${paramsText}\n\nRULES:\n- Be specific  reference actual UI elements in the screenshot\n- For "Bad", clearly state what's missing or broken\n- For "Can be Improved", note what exists but could be better\n- Recommendations must be actionable\n- If cannot be evaluated from screenshot, mark "Can be Improved" with note "Manual review recommended"` },
        { type: "image", source: { type: "base64", media_type: mediaType, data: imgB64 } }
      ];

      try {
        const models = ['claude-sonnet-4-20250514', 'claude-sonnet-4-5-20250929', 'claude-3-5-sonnet-20241022'];
        let apiResp = null;
        let lastErr = null;
        for (const model of models) {
          try {
            const resp = await fetch('https://api.anthropic.com/v1/messages', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'x-api-key': state.apiKey,
                'anthropic-version': '2023-06-01',
                'anthropic-dangerous-direct-browser-access': 'true'
              },
              body: JSON.stringify({ model, max_tokens: 4096, messages: [{ role: 'user', content }] })
            });
            if (!resp.ok) {
              const errBody = await resp.json().catch(() => ({}));
              const errMsg = errBody.error?.message || `API error ${resp.status}`;
              addLog(`  Model ${model}: ${errMsg}`, 'warn');
              lastErr = new Error(errMsg);
              continue;
            }
            apiResp = await resp.json();
            if (model !== models[0]) addLog(`  Using fallback model: ${model}`, 'info');
            break;
          } catch (fetchErr) {
            addLog(`  Model ${model} fetch error: ${fetchErr.message}`, 'warn');
            lastErr = fetchErr;
          }
        }
        if (!apiResp) throw lastErr || new Error('All models failed');

        const text = apiResp.content[0].text;
        const start = text.indexOf('[');
        const end = text.lastIndexOf(']') + 1;
        if (start >= 0 && end > start) {
          const batchEvals = JSON.parse(text.substring(start, end));
          state.evaluations[pt].push(...batchEvals);
          addLog(`  Batch ${batchNum}/${totalPageBatches}: ${batchEvals.length} evaluations done`, 'success');
        } else {
          addLog(`  Batch ${batchNum}: Could not parse response  raw: ${text.substring(0, 100)}`, 'error');
          state.errors.push(`${PAGE_LABELS[pt]} batch ${batchNum}: Parse failed`);
        }
      } catch (err) {
        addLog(`  Batch ${batchNum} ERROR: ${err.message}`, 'error');
        state.errors.push(`${PAGE_LABELS[pt]} batch ${batchNum}: ${err.message}`);
      }

      completedBatches++;
      await sleep(300);
    }
    addLog('', '');
  }

  setProgress(95, 'Building results...');
  addLog('Audit complete! Building results dashboard...', 'success');
  await sleep(500);
  setProgress(100, 'Done!');
  showResults();
}

// ===================================================
// RESULTS DASHBOARD
// ===================================================
function showResults() {
  goToScreen('screen-results', 2);

  let totalBad = 0, totalImp = 0, totalGood = 0;
  Object.values(state.evaluations).forEach(evals => {
    evals.forEach(e => {
      if (e.evaluation === 'Bad') totalBad++;
      else if (e.evaluation === 'Can be Improved') totalImp++;
      else totalGood++;
    });
  });
  const total = totalBad + totalImp + totalGood;

  const errCount = state.errors.length;
  document.getElementById('statGrid').innerHTML = [
    { num: total, lbl: 'Parameters Checked', color: 'var(--white)' },
    { num: totalBad, lbl: 'Critical Issues', color: 'var(--red)' },
    { num: totalImp, lbl: 'Improvements', color: 'var(--yellow)' },
    { num: totalGood, lbl: 'Passing', color: 'var(--green)' }
  ].map(s => `<div class="stat-card"><div class="num" style="color:${s.color}">${s.num}</div><div class="lbl">${s.lbl}</div></div>`).join('');

  if (total === 0 || errCount > 0) {
    const errHtml = state.errors.length > 0 ? `<div style="margin-top:12px;font-size:13px;color:var(--red)">${state.errors.map(e => `<div> ${e}</div>`).join('')}</div>` : '';
    const noResultsMsg = total === 0
      ? `<div class="card" style="border-color:var(--red)"><h2 style="color:var(--red)"> No Results Generated</h2><p>The audit completed but no evaluations were produced. This usually means:</p><p style="margin-top:8px">1. The Claude API returned errors (check if the API key has credits)<br>2. Browser CORS is blocking the API calls<br>3. The PageSpeed screenshots were too large for the API<br>4. Check your browser console (F12) for detailed errors</p>${errHtml}<div class="btn-row" style="margin-top:16px"><button class="btn btn-primary" onclick="location.reload()">Try Again</button></div></div>`
      : (errCount > 0 ? `<div class="card" style="border-color:var(--yellow)"><h3 style="color:var(--yellow)"> ${errCount} Batch Error(s)</h3><p>Some evaluation batches failed. Results may be incomplete.</p>${errHtml}</div>` : '');
    document.getElementById('statGrid').insertAdjacentHTML('afterend', noResultsMsg);
  }

  const tabs = document.getElementById('pageTabs');
  tabs.innerHTML = `<div class="page-tab active" onclick="filterResults('all',this)">All</div>`;
  Object.keys(state.evaluations).forEach(pt => {
    tabs.innerHTML += `<div class="page-tab" onclick="filterResults('${pt}',this)">${PAGE_LABELS[pt] || pt}</div>`;
  });
  renderTable('all');
}

function filterResults(filter, el) {
  state.currentFilter = filter;
  document.querySelectorAll('.page-tab').forEach(t => t.classList.remove('active'));
  if (el) el.classList.add('active');
  renderTable(filter);
}

function renderTable(filter) {
  const tbody = document.getElementById('resultsBody');
  tbody.innerHTML = '';
  let idx = 0;
  const pages = filter === 'all' ? Object.keys(state.evaluations) : [filter];
  pages.forEach(pt => {
    (state.evaluations[pt] || []).forEach(e => {
      idx++;
      const badgeClass = e.evaluation === 'Bad' ? 'badge-bad' : e.evaluation === 'Can be Improved' ? 'badge-improve' : 'badge-good';
      const param = findParam(e.id);
      const tr = document.createElement('tr');
      tr.style.cursor = 'pointer';
      tr.onclick = () => showDetail(e, pt);
      tr.innerHTML = `<td style="color:var(--muted)">${idx}</td><td>${e.id ? e.id+': ':''}${param ? param.checkpoint.substring(0,90) : (e.observation||'').substring(0,90)}</td><td>${PAGE_LABELS[pt]||pt}</td><td>${param?param.principle:'-'}</td><td><span class="badge ${badgeClass}">${e.evaluation}</span></td>`;
      tbody.appendChild(tr);
    });
  });
}

function findParam(id) {
  for (const params of Object.values(PARAMETERS)) {
    const f = params.find(p => p.id === id);
    if (f) return f;
  }
  return null;
}

function showDetail(e, pt) {
  const panel = document.getElementById('detailPanel');
  panel.style.display = 'block';
  document.getElementById('detailTitle').textContent = `${e.id}  ${PAGE_LABELS[pt]}`;
  document.getElementById('detailObs').textContent = e.observation || 'No observation';
  document.getElementById('detailRec').textContent = e.recommendation || 'No recommendation';
  panel.scrollIntoView({ behavior: 'smooth' });
}

// ===================================================
// EXPORT
// ===================================================
function downloadJSON() {
  const data = { client: state.clientName, date: new Date().toISOString(), evaluations: state.evaluations, performance: state.perfData };
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
  dl(blob, `PreAudit_${safe(state.clientName)}_${ds()}.json`);
}

function generatePPTX() {
  const pptx = new PptxGenJS();
  pptx.defineLayout({ name: 'WIDE', width: 13.333, height: 7.5 });
  pptx.layout = 'WIDE';
  const BG='0D0D2B',CARD='1A1A3E',ORANGE='FF6B35',BLUE='007BFF',WHITE='FFFFFF',LIGHT='CCCCCC',MUTED='999999',GREEN='00C853',RED='FF4444',YELLOW='FFBB00';
  const bg=s=>{s.background={fill:BG}};
  const bar=(s,c)=>{s.addShape('rect',{x:0,y:0,w:13.333,h:0.08,fill:{color:c}})};

  // Title
  let s=pptx.addSlide();bg(s);bar(s,ORANGE);
  s.addText('CRO Pre-Audit Report',{x:.8,y:2,w:11,h:1.2,fontSize:44,color:WHITE,bold:true});
  s.addText(state.clientName,{x:.8,y:3.2,w:11,h:.8,fontSize:32,color:ORANGE,bold:true});
  s.addText('Conversion Rate Optimization Analysis',{x:.8,y:4.2,w:11,h:.6,fontSize:20,color:LIGHT});
  s.addText('Prepared by GROWISTO',{x:.8,y:5.5,w:11,h:.5,fontSize:16,color:MUTED});
  s.addText(new Date().toLocaleDateString('en-US',{month:'long',year:'numeric'}),{x:.8,y:6,w:11,h:.5,fontSize:14,color:MUTED});

  // Executive Summary
  let tB=0,tI=0,tG=0;
  Object.values(state.evaluations).forEach(ev=>{ev.forEach(e=>{if(e.evaluation==='Bad')tB++;else if(e.evaluation==='Can be Improved')tI++;else tG++})});
  const tt=tB+tI+tG;
  s=pptx.addSlide();bg(s);bar(s,ORANGE);
  s.addText('Executive Summary',{x:.8,y:.4,w:11,h:.7,fontSize:36,color:WHITE,bold:true});
  [{l:'Parameters Checked',v:tt,c:WHITE},{l:'Critical Issues',v:tB,c:RED},{l:'Improvements Needed',v:tI,c:YELLOW},{l:'Passing',v:tG,c:GREEN}].forEach((item,i)=>{
    const x=.8+i*3.1;
    s.addShape('rect',{x,y:1.5,w:2.8,h:1.8,fill:{color:CARD}});
    s.addText(String(item.v),{x,y:1.7,w:2.8,h:.9,fontSize:48,color:item.c,bold:true,align:'center'});
    s.addText(item.l,{x,y:2.6,w:2.8,h:.5,fontSize:14,color:MUTED,align:'center'});
  });
  s.addText('Findings by Page Type',{x:.8,y:3.8,w:11,h:.5,fontSize:20,color:WHITE,bold:true});
  let yy=4.5;
  Object.entries(state.evaluations).forEach(([pt,ev])=>{
    const bad=ev.filter(e=>e.evaluation==='Bad').length;
    const imp=ev.filter(e=>e.evaluation==='Can be Improved').length;
    const gd=ev.filter(e=>e.evaluation==='Good').length;
    s.addText(`${PAGE_LABELS[pt]||pt}:  ${bad} Critical  |  ${imp} Improvements  |  ${gd} Good`,{x:1,y:yy,w:11,h:.4,fontSize:14,color:LIGHT});
    yy+=.45;
  });

  // Performance slide
  if (state.perfData && Object.keys(state.perfData).length > 0) {
    s=pptx.addSlide();bg(s);bar(s,BLUE);
    s.addText('Performance Overview',{x:.8,y:.4,w:11,h:.7,fontSize:36,color:WHITE,bold:true});
    let py=1.5;
    Object.entries(state.perfData).forEach(([pt,perf])=>{
      if (!perf || perf.score == null) return;
      const scoreColor = perf.score >= 0.9 ? GREEN : perf.score >= 0.5 ? YELLOW : RED;
      s.addShape('rect',{x:.8,y:py,w:11.5,h:.9,fill:{color:CARD}});
      s.addText(`${PAGE_LABELS[pt]||pt}`,{x:1.2,y:py+.05,w:3,h:.4,fontSize:16,color:ORANGE,bold:true});
      s.addText(`Score: ${Math.round(perf.score*100)}/100  |  FCP: ${perf.fcp||'N/A'}  |  LCP: ${perf.lcp||'N/A'}  |  CLS: ${perf.cls||'N/A'}`,{x:1.2,y:py+.45,w:10,h:.4,fontSize:13,color:LIGHT});
      py+=1.05;
    });
  }

  // UX Insights Divider
  s=pptx.addSlide();bg(s);
  s.addShape('rect',{x:0,y:3.2,w:13.333,h:.08,fill:{color:ORANGE}});
  s.addText('UX Insights',{x:.8,y:2.2,w:11.7,h:1.2,fontSize:48,color:WHITE,bold:true,align:'center'});
  s.addText(`Detailed findings across ${state.clientName}'s ecommerce pages`,{x:.8,y:4,w:11.7,h:.6,fontSize:18,color:LIGHT,align:'center'});

  // Finding slides
  let fn=0;
  ['home','plp','pdp','cart','checkout'].forEach(pt=>{
    const ev=state.evaluations[pt]||[];
    const issues=ev.filter(e=>e.evaluation==='Bad'||e.evaluation==='Can be Improved');
    if(!issues.length)return;
    const lb=PAGE_LABELS[pt]||pt;
    s=pptx.addSlide();bg(s);
    s.addShape('rect',{x:0,y:3.2,w:13.333,h:.08,fill:{color:BLUE}});
    s.addText(`${lb} Findings`,{x:.8,y:2.2,w:11.7,h:1.2,fontSize:40,color:WHITE,bold:true,align:'center'});
    s.addText(`${issues.length} issues identified`,{x:.8,y:4,w:11.7,h:.6,fontSize:18,color:LIGHT,align:'center'});

    issues.forEach(issue=>{
      fn++;
      s=pptx.addSlide();bg(s);bar(s,ORANGE);
      const sc=issue.evaluation==='Bad'?RED:YELLOW;
      s.addShape('rect',{x:11,y:.3,w:1.8,h:.45,fill:{color:sc}});
      s.addText(issue.evaluation,{x:11,y:.3,w:1.8,h:.45,fontSize:12,color:'000000',bold:true,align:'center'});
      const obs=issue.observation||'';
      s.addText(obs.length>90?obs.substring(0,90)+'...':obs,{x:.8,y:.4,w:10,h:.8,fontSize:20,color:WHITE,bold:true});

      // Screenshot
      const ss=state.screenshotB64[pt];
      if(ss&&ss.desktop){
        try{s.addImage({data:`image/jpeg;base64,${ss.desktop}`,x:.8,y:1.5,w:5.5,h:4.5,sizing:{type:'contain',w:5.5,h:4.5}})}catch(e){}
      }

      s.addText('Observations',{x:7,y:1.5,w:5.5,h:.4,fontSize:16,color:ORANGE,bold:true});
      s.addText(issue.observation||'N/A',{x:7,y:2,w:5.5,h:1.8,fontSize:13,color:LIGHT,valign:'top'});
      s.addText('Recommendations',{x:7,y:4,w:5.5,h:.4,fontSize:16,color:GREEN,bold:true});
      s.addText(issue.recommendation||'N/A',{x:7,y:4.5,w:5.5,h:2.2,fontSize:13,color:LIGHT,valign:'top'});
      s.addText(`${lb}  |  Finding #${fn}`,{x:.8,y:7,w:5,h:.4,fontSize:10,color:MUTED});
    });
  });

  // Methodology
  s=pptx.addSlide();bg(s);bar(s,ORANGE);
  s.addText('Our Approach to CRO',{x:.8,y:.4,w:11,h:.7,fontSize:36,color:WHITE,bold:true});
  [['1. Heuristic Analysis','254 UX parameters evaluated across Home, PLP, PDP, Cart, and Checkout'],['2. Technical Audit','DOM-level checks for performance, schema, analytics, mobile responsiveness'],['3. Performance Profiling','PageSpeed scores, Core Web Vitals, and mobile vs desktop analysis'],['4. Visual Review','Screenshot-based AI evaluation of design patterns, trust signals, and conversion elements'],['5. Prioritized Roadmap','Findings ranked by impact on conversion, revenue, and user experience']].forEach(([t,d],i)=>{
    const y=1.5+i*1.05;
    s.addShape('rect',{x:.8,y,w:11.5,h:.9,fill:{color:CARD}});
    s.addText(t,{x:1.2,y:y+.05,w:10,h:.4,fontSize:16,color:ORANGE,bold:true});
    s.addText(d,{x:1.2,y:y+.45,w:10,h:.4,fontSize:13,color:LIGHT});
  });

  // Closing
  s=pptx.addSlide();bg(s);bar(s,ORANGE);
  s.addText('This is the end of our deck, But',{x:.8,y:2,w:11.7,h:.6,fontSize:20,color:MUTED,align:'center'});
  s.addText('This is the start of your story!',{x:.8,y:2.8,w:11.7,h:1,fontSize:40,color:WHITE,bold:true,align:'center'});
  s.addText('GROWISTO',{x:.8,y:4.5,w:11.7,h:.6,fontSize:28,color:ORANGE,bold:true,align:'center'});
  s.addText('growth@growisto.com  |  www.growisto.com',{x:.8,y:5.3,w:11.7,h:.5,fontSize:16,color:LIGHT,align:'center'});

  pptx.writeFile({fileName:`PreAudit_${safe(state.clientName)}_${ds()}.pptx`}).then(()=>toast('PPTX downloaded!')).catch(e=>toast('Error: '+e.message));
}

// ===================================================
// UTILS
// ===================================================
function ds(){const d=new Date();return `${d.getFullYear()}${String(d.getMonth()+1).padStart(2,'0')}${String(d.getDate()).padStart(2,'0')}`}
function safe(s){return s.replace(/[^a-zA-Z0-9]/g,'_')}
function dl(b,n){const a=document.createElement('a');a.href=URL.createObjectURL(b);a.download=n;a.click();URL.revokeObjectURL(a.href)}
function sleep(ms){return new Promise(r=>setTimeout(r,ms))}
function toast(m){const t=document.createElement('div');t.className='toast';t.textContent=m;document.body.appendChild(t);setTimeout(()=>t.remove(),4000)}
</script>
</body>
</html>
